(this["webpackJsonpreact-leaflet-mgrs-graticule-example"]=this["webpackJsonpreact-leaflet-mgrs-graticule-example"]||[]).push([[0],{26:function(t,n,a){},27:function(t,n,a){},29:function(t,n,a){"use strict";a.r(n);var e=a(12),o=a.n(e),i=a(13),r=a.n(i),s=(a(26),a(31)),l=a(32),h=a(6),g=a(7),c=a(10),v=a(9),m=a(1),u=new(a(16));function f(t,n,a,e){return u.convertUtmToLatLng(t,n,a,e)}function d(t,n){return y({lat:t,lon:n})}function p(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(m.a)(t,n)}function y(t){var n,a,e,o,i,r,s,l=t.lat,h=t.lon||t.lng,g=6378137,c=.00669438,v=.9996,m=T(l),u=T(h);s=Math.floor((h+180)/6)+1,180===h&&(s=60),l>=56&&l<64&&h>=3&&h<12&&(s=32),l>=72&&l<84&&(h>=0&&h<9?s=31:h>=9&&h<21?s=33:h>=21&&h<33?s=35:h>=33&&h<42&&(s=37)),r=T(6*(s-1)-180+3),n=.006739496752268451,a=g/Math.sqrt(1-c*Math.sin(m)*Math.sin(m)),e=Math.tan(m)*Math.tan(m),o=n*Math.cos(m)*Math.cos(m);var f=v*a*((i=Math.cos(m)*(u-r))+(1-e+o)*i*i*i/6+(5-18*e+e*e+72*o-58*n)*i*i*i*i*i/120)+5e5,d=v*(g*(.9983242984503243*m-.002514607064228144*Math.sin(2*m)+2639046602129982e-21*Math.sin(4*m)-3.418046101696858e-9*Math.sin(6*m))+a*Math.tan(m)*(i*i/2+(5-e+9*o+4*o*o)*i*i*i*i/24+(61-58*e+e*e+600*o-2.2240339282485886)*i*i*i*i*i*i/720));return l<0&&(d+=1e7),{northing:Math.round(d),easting:Math.round(f),zoneNumber:s,zoneLetter:x(l)}}function T(t){return t*(Math.PI/180)}function x(t){var n="Z";return 84>=t&&t>=72?n="X":72>t&&t>=64?n="W":64>t&&t>=56?n="V":56>t&&t>=48?n="U":48>t&&t>=40?n="T":40>t&&t>=32?n="S":32>t&&t>=24?n="R":24>t&&t>=16?n="Q":16>t&&t>=8?n="P":8>t&&t>=0?n="N":0>t&&t>=-8?n="M":-8>t&&t>=-16?n="L":-16>t&&t>=-24?n="K":-24>t&&t>=-32?n="J":-32>t&&t>=-40?n="H":-40>t&&t>=-48?n="G":-48>t&&t>=-56?n="F":-56>t&&t>=-64?n="E":-64>t&&t>=-72?n="D":-72>t&&t>=-80&&(n="C"),n}var C=a(4),w=a(30),b=a(2),P=/([0-9]+[A-Z])([A-Z]{2})([0-9]{2})/;function I(t,n){return t===n?0:t.lng===n.lng?NaN:(n.lat-t.lat)/(n.lng-t.lng)}function G(t,n,a){return isNaN(t)?a.lat:a.lat+t*(n-a.lng)}function k(t,n,a){if(0===t)throw new Error("getAdjustedLongitude: Zero slope received");return isNaN(t)?a.lng:(n-a.lat+t*a.lng)/t}function Z(t){var n=String.fromCharCode(t.charCodeAt(0)+1);return"I"===n||"O"===n?Z(n):n}function j(t,n,a){var e,o,i=I(t,n),r=Object(m.a)([t.lng,t.lat],1);switch(a){case"East":var s=Object(b.getGZD)(r.match(P)[1]).geometry.coordinates[0][2][0];return{lat:o=G(i,s,n),lng:e=s};case"West":var l=Object(b.getGZD)(r.match(P)[1]).geometry.coordinates[0][1][0];return{lat:o=G(i,l,n),lng:e=l};case"North":var h=Object(b.getGZD)(r.match(P)[1]).geometry.coordinates[0][1][1];e=k(i,h,n);return"31V"===r.match(P)[1]&&e<3&&n.lng>3?(o=G(i,3,n),e=3):o=h,{lat:o,lng:e};case"South":var g=Object(b.getGZD)(r.match(P)[1]).geometry.coordinates[0][0][1];return{lat:o=g,lng:e=k(i,g,n)};default:return{lat:o,lng:e}}}function M(t,n,a,e){var o=/([0-9]+)([A-Z])/;if(t===a)return[t];var i=parseInt(t.match(o)[1]),r=t.match(o)[2],s=parseInt(n.match(o)[1]),l=e.match(o)[2],h=[],g=[];if("32V"===t&&g.push("31"),i!==s){for(var c=i;c<=s;c++)g.push(c.toString());if(r!==l){for(var v=[].concat(g),m=l;m<=r;){for(var u=v.length,f=0;f<u;f++)h.push(v[f]+m);m=Z(m)}h=h.flat()}else{for(var d=g.length,p=0;p<d;p++)g[p]=g[p].toString()+r;h=g}}else{for(var y=l,T=[];y<=r;)T.push(i.toString()+y),y=Z(y);h=T}return(h=h.filter((function(t){return"32X"!==t&&"34X"!==t&&"36X"!==t}))).includes("31W")&&!h.includes("32V")&&h.push("32V"),"32V"!==n||"32U"!==a||h.includes("31U")||h.push("31U"),h}function O(t,n,a,e,o){var i=t.measureText(n).width,r=t.measureText(n).fontBoundingBoxAscent,s=o.x,l=o.y;t.fillStyle=e,t.fillRect(s-i/2-1,l-r+1,i+3,r+2),t.fillStyle=a,t.fillText(n,s-i/2,l)}var S=/([0-9]+[A-Z])([A-Z]{2})(\d+)/,N=function(t){var n=Object(w.a)(),a=document.createElement("canvas");a.classList.add("leaflet-zoom-animated");var e=new E({map:n,canvas:a});return n.addLayer(e),null},E=function(t){Object(c.a)(a,t);var n=Object(v.a)(a);function a(t){var e;return Object(h.a)(this,a),(e=n.call(this,t)).currLatInterval=8,e.currLngInterval=6,e.defaultOptions={showGrid:!0,showLabel:!0,opacity:10,weight:3,color:"#888888",font:"14px Courier New",fontColor:"#FFF",dashArray:[6,6],minZoom:3},e.map=t.map,e.canvas=t.canvas,e.options=t&&t.options||e.defaultOptions,e}return Object(g.a)(a,[{key:"onAdd",value:function(t){t._panes.overlayPane.appendChild(this.canvas),t.on("viewreset",this.reset,this),t.on("move",this.reset,this),this.reset()}},{key:"onRemove",value:function(t){t._panes.overlayPane.removeChild(this.canvas),t.off("viewreset",this.reset,this),t.off("move",this.reset,this),this.canvas=null,this.map=null}},{key:"reset",value:function(){var t=this.map.getSize(),n=this.map.containerPointToLayerPoint([0,0]);this.canvas.style.transform="translate3d(".concat(n.x,"px,").concat(n.y,"px,0)"),this.canvas.width=t.x,this.canvas.height=t.y,this.drawGzd()}},{key:"drawGzd",value:function(){if(this.canvas&&this.map&&!(this.map.getZoom()<this.options.minZoom)){var t=this.canvas.getContext("2d");t.clearRect(0,0,this.canvas.width,this.canvas.height),t.lineWidth=this.options.weight,t.strokeStyle=this.options.color,t.fillStyle=this.options.color,t.setLineDash(this.options.dashArray),this.options.font&&(t.font=this.options.font);var n=this.map.containerPointToLatLng({x:0,y:0}),a=this.map.containerPointToLatLng({x:this.canvas.width,y:this.canvas.height}),e=(n.lat-a.lat)/(.2*this.canvas.height),o=(a.lng-n.lng)/(.2*this.canvas.width);if(!isNaN(e)&&!isNaN(o)){e<1&&(e=1),o<1&&(o=1),a.lat<-90?a.lat=-90:a.lat=parseInt(a.lat-e,10),n.lat>90?n.lat=90:n.lat=parseInt(n.lat+e,10),n.lng>0&&a.lng<0&&(a.lng+=360),a.lng=parseInt(a.lng+o,10),n.lng=parseInt(n.lng-o,10);for(var i=this.currLatInterval;i<=n.lat;i+=this.currLatInterval)i>=a.lat&&(80===i&&(i=84),this.drawLatitudeLine(t,i,n.lng,a.lng));for(var r=0;r>=a.lat;r-=this.currLatInterval)r<=n.lat&&this.drawLatitudeLine(t,r,n.lng,a.lng);for(var s=this.currLngInterval;s<=a.lng+6;s+=this.currLngInterval)s>=n.lng&&this.drawLongitudeLine(t,s,n.lat,a.lat);for(var l=0;l>=n.lng;l-=this.currLngInterval)l<=a.lng&&this.drawLongitudeLine(t,l,n.lat,a.lat)}}}},{key:"drawLatitudeLine",value:function(t,n,a,e){var o=this.map.latLngToContainerPoint({lat:n,lng:a}),i=this.map.latLngToContainerPoint({lat:n,lng:e});t.beginPath(),t.moveTo(o.x,o.y),t.lineTo(i.x,i.y),t.stroke()}},{key:"drawLongitudeLine",value:function(t,n,a,e){a>=84&&(a=84),e<=-80&&(e=-80);var o=this.map.latLngToContainerPoint({lat:a,lng:n}),i=this.map.latLngToContainerPoint({lat:e,lng:n}),r=72;if(t.beginPath(),6===n){var s=64,l=56,h=this.map.latLngToContainerPoint({lat:s,lng:n}),g=this.map.latLngToContainerPoint({lat:s,lng:3}),c=this.map.latLngToContainerPoint({lat:l,lng:3}),v=this.map.latLngToContainerPoint({lat:l,lng:n});if(a>s&&e>l){if(a>r){var m=this.map.latLngToContainerPoint({lat:r,lng:n});t.moveTo(m.x,m.y)}else t.moveTo(o.x,o.y);t.lineTo(h.x,h.y),t.moveTo(g.x,g.y),t.lineTo(g.x,i.y)}else if(a<s&&e<l)t.moveTo(g.x,o.y),t.lineTo(c.x,c.y),t.moveTo(v.x,v.y),t.lineTo(v.x,i.y);else if(a>=s&&e<=l){if(a>r){var u=this.map.latLngToContainerPoint({lat:r,lng:n});t.moveTo(u.x,u.y)}else t.moveTo(o.x,o.y);t.lineTo(h.x,h.y),t.moveTo(g.x,g.y),t.lineTo(c.x,c.y),t.moveTo(h.x,c.y),t.lineTo(h.x,i.y)}else a<=s&&e>=l&&(t.moveTo(g.x,o.y),t.lineTo(c.x,i.y))}else if(12===n)if(a>r&&a<=84){var f=this.map.latLngToContainerPoint({lat:a,lng:9});t.moveTo(f.x,f.y);var d=this.map.latLngToContainerPoint({lat:r,lng:9});t.lineTo(d.x,d.y);var p=this.map.latLngToContainerPoint({lat:r,lng:n});t.moveTo(p.x,p.y),t.lineTo(i.x,i.y)}else t.moveTo(o.x,o.y),t.lineTo(i.x,i.y);else if(18===n){if(a>r){var y=this.map.latLngToContainerPoint({lat:r,lng:n});t.moveTo(y.x,y.y)}else t.moveTo(o.x,o.y);t.lineTo(i.x,i.y)}else if(24===n)if(a>r&&a<=84){var T=this.map.latLngToContainerPoint({lat:a,lng:21});t.moveTo(T.x,T.y);var L=this.map.latLngToContainerPoint({lat:r,lng:21});t.lineTo(L.x,L.y);var x=this.map.latLngToContainerPoint({lat:r,lng:n});t.moveTo(x.x,x.y),t.lineTo(i.x,i.y)}else t.moveTo(o.x,o.y),t.lineTo(i.x,i.y);else if(30===n){if(a>r){var C=this.map.latLngToContainerPoint({lat:r,lng:n});t.moveTo(C.x,C.y)}else t.moveTo(o.x,o.y);t.lineTo(i.x,i.y)}else if(36===n)if(a>r&&a<=84){var w=this.map.latLngToContainerPoint({lat:a,lng:33});t.moveTo(w.x,w.y);var b=this.map.latLngToContainerPoint({lat:r,lng:33});t.lineTo(b.x,b.y);var P=this.map.latLngToContainerPoint({lat:r,lng:n});t.moveTo(P.x,P.y),t.lineTo(i.x,i.y)}else t.moveTo(o.x,o.y),t.lineTo(i.x,i.y);else t.moveTo(o.x,o.y),t.lineTo(i.x,i.y);t.stroke(),this.drawGzdLabels(t,n)}},{key:"drawGzdLabels",value:function(t,n){for(var a=-76;a<84;a+=8){var e=void 0;e=60===a?0===n?1.5:6===n?7.5:n+3:76===a?0===n?4.5:12===n?15:24===n?27:36===n?37.5:n+3:n+3;var o=void 0;try{o=p([e,a],1).match(S)[1]}catch(r){return}if(("33X"!==o||6!==n)&&("35X"!==o||18!==n)&&("37X"!==o||30!==n)){var i=this.map.latLngToContainerPoint({lat:a,lng:e});O(t,o,this.options.fontColor,this.options.color,i)}}}}]),a}(C.Layer),A=a(8),z=/([0-9]+[A-Z])([A-Z]{2})(\d+)/,B=new(a(16)),W=(C.Layer,/([0-9]+[A-Z])([A-Z]{2})(\d+)/),D=(new(a(16)),function(t){var n=Object(w.a)(),a=document.createElement("canvas");a.classList.add("leaflet-zoom-animated");var e=new V({map:n,canvas:a});return n.addLayer(e),null}),V=function(t){Object(c.a)(a,t);var n=Object(v.a)(a);function a(t){var e;return Object(h.a)(this,a),(e=n.call(this,t)).updateVariables=e.updateVariables.bind(Object(A.a)(e)),e.defaultOptions={showGrid:!0,showLabel:!0,opacity:10,weight:1.5,color:"#000",hkColor:"#990000",hkDashArray:[4,4],font:"14px Courier New",fontColor:"#FFF",dashArray:[],hundredKMinZoom:6,tenKMinZoom:9,oneKMinZoom:12,eastingBottom:!0,NorthingRight:!0},e.options=t&&t.options||e.defaultOptions,e.map=t.map,e.canvas=t.canvas,e.currZoom=null,e.mgrsGridInterval=null,e}return Object(g.a)(a,[{key:"updateVariables",value:function(t){this.options=t&&t.options||this.defaultOptions}},{key:"onAdd",value:function(t){t._panes.overlayPane.appendChild(this.canvas),t.on("viewreset",this.reset,this),t.on("move",this.reset,this),this.reset()}},{key:"onRemove",value:function(t){t._panes.overlayPane.removeChild(this.canvas),t.off("viewreset",this.reset,this),t.off("move",this.reset,this),this.canvas=null,this.map=null}},{key:"reset",value:function(){var t=this.map.getSize(),n=this.map.containerPointToLayerPoint([0,0]);this.canvas.style.transform="translate3d(".concat(n.x,"px,").concat(n.y,"px,0)"),this.canvas.width=t.x,this.canvas.height=t.y,this.map.getZoom()>this.options.oneKMinZoom?this.mgrsGridInterval=1e3:this.map.getZoom()>this.options.tenKMinZoom?this.mgrsGridInterval=1e4:this.map.getZoom()>this.options.hundredKMinZoom?this.mgrsGridInterval=1e5:this.mgrsGridInterval=null,this.drawGrid()}},{key:"_getLabelText",value:function(t){var n=(t%1e5/1e3).toString();return 1e4===this.mgrsGridInterval&&"0"===n&&(n="00"),n}},{key:"_drawLine",value:function(t,n){n?(t.setLineDash(this.options.dashArray),t.lineWidth=this.options.weight+1,t.strokeStyle=this.options.fontColor,t.stroke(),t.lineWidth=this.options.weight,t.strokeStyle=this.options.color,t.stroke()):(t.lineWidth=this.options.weight,t.strokeStyle=this.options.hkColor,t.setLineDash(this.options.hkDashArray),t.stroke())}},{key:"getVizGrids",value:function(){var t=p([this.map.getBounds().getNorthWest().lng,this.map.getBounds().getNorthWest().lat],1),n=p([this.map.getBounds().getNorthEast().lng,this.map.getBounds().getNorthEast().lat],1),a=p([this.map.getBounds().getSouthEast().lng,this.map.getBounds().getSouthEast().lat],1),e=p([this.map.getBounds().getSouthWest().lng,this.map.getBounds().getSouthWest().lat],1);return M(t.match(W)[1],n.match(W)[1],a.match(W)[1],e.match(W)[1])}},{key:"drawGrid",value:function(){var t=this;if(this.canvas&&this.map&&!(this.map.getZoom()<this.options.hundredKMinZoom)){var n=this.canvas.getContext("2d");n.clearRect(0,0,this.canvas.width,this.canvas.height),n.lineWidth=this.options.weight+.75,n.strokeStyle="#FFF",n.fillStyle=this.options.color,n.setLineDash(this.options.dashArray),n.font=this.options.font;var a=this.getVizGrids(),e=this.map.getBounds();a.forEach((function(a,o,i){var r=Object(b.getGZD)(a),s=r.geometry.coordinates[0][1][0],l=r.geometry.coordinates[0][2][0],h=r.geometry.coordinates[0][1][1],g=r.geometry.coordinates[0][0][1],c=s<e.getWest()&&1e5!==t.mgrsGridInterval?e.getWest():s,v=l>e.getEast()&&1e5!==t.mgrsGridInterval?e.getEast():l,m=h>e.getNorth()?e.getNorth():h,u=g<e.getSouth()?e.getSouth():g,y=L.latLngBounds(L.latLng(m,c),L.latLng(u,v)),T=1e-5,x=d(u+T,c+T),C=d(u+T,v-T),w=d(m-T,c+T),P=d(m-T,v-T),k=t.map.getCenter().lat>=0?x.easting:w.easting,Z=t.map.getCenter().lat>=0?C.easting:P.easting,M=x.northing,S=P.northing;k=Math.floor(k/t.mgrsGridInterval)*t.mgrsGridInterval,Z=Math.ceil(Z/t.mgrsGridInterval)*t.mgrsGridInterval,M=Math.floor(M/t.mgrsGridInterval)*t.mgrsGridInterval,S=Math.ceil(S/t.mgrsGridInterval)*t.mgrsGridInterval;for(var N=[],E=k;E<=Z;E+=t.mgrsGridInterval)N.push(E);for(var A=[],z=M;z<=S;z+=t.mgrsGridInterval)A.push(z);var B=w.zoneLetter,D=w.zoneNumber;N.forEach((function(a,e,o){A.forEach((function(e,o,i){var r=f(a,e,D,B);if(!(r.lng>l)&&!(r.lng<s)){var c;if(r.lat<=g)r=j(r,f(a,i[o+1],D,B),"North");else if(r.lat>h){r=j(r,f(a,i[o-1],D,B),"South")}r.lat&&r.lng&&(c=t.map.latLngToContainerPoint(r),0===o?(n.beginPath(),n.moveTo(c.x,c.y)):n.lineTo(c.x,c.y))}}));var i=a%1e5!==0;t._drawLine(n,i),n.beginPath()})),A.forEach((function(a,e,o){N.forEach((function(e,o,i){var r=f(e,a,D,B);if(!(r.lat>h||r.lat<g)){var s=t.map.latLngToContainerPoint(r);if(0===o){if(n.beginPath(),r.lng<c){var l=I(r,f(i[o+1],a,D,B));try{r.lat=G(l,c,r),r.lng=c,s=t.map.latLngToContainerPoint(r)}catch(u){console.error(u),console.trace()}}n.moveTo(s.x,s.y)}else{if(r.lng>v){var m=I(r,f(i[o-1],a,D,B));try{r.lat=G(m,v,r),r.lng=v,s=t.map.latLngToContainerPoint(r)}catch(u){console.error(u),console.trace()}}n.lineTo(s.x,s.y)}}}));var i=a%1e5!==0;t._drawLine(n,i)}));var V=!1;1e5===t.mgrsGridInterval?N.forEach((function(a,e,o){V||A.forEach((function(i,r,s){var l,h,g,m=f(a,i,D,B);if(e!==o.length-1){if((g=f(o[e+1],i,D,B)).lng>v){var u=I(m,g);g.lat=G(u,v,g),g.lng=v,V=!0}}else g=f(o[e-1],i,D,B);if(h=r!==s.length-1?f(a,s[r+1],D,B):f(a,s[r-1],D,B),m.lng<c){var d=I(m,g);m.lat=G(d,c,m),m.lng=c}else if(m.lng>v){var T=I(m,g);m.lat=G(T,v,m),m.lng=v}if(!(L.latLng(m).distanceTo(g)<1e4)){l={lat:(m.lat+h.lat)/2,lng:(m.lng+g.lng)/2};try{if(l&&y.contains(l)){var x=p([l.lng,l.lat]).match(W)[2];O(n,x,t.options.fontColor,t.options.hkColor,t.map.latLngToContainerPoint(l))}}catch(C){return}}}))})):(N.forEach((function(a,e,o){if(0!==e&&e!==o.length-1){var i;try{var r=f(a,A[1],D,B);i=t.map.latLngToContainerPoint({lat:u,lng:r.lng})}catch(l){return}var s=t._getLabelText(a);O(n,s,t.options.fontColor,t.options.color,{x:i.x,y:i.y-15})}})),A.forEach((function(a,e,o){var i;try{var r=f(N[N.length-1],a,D,B);i=t.map.latLngToContainerPoint({lat:r.lat,lng:v})}catch(l){return}var s=t._getLabelText(a);O(n,s,t.options.fontColor,t.options.color,{x:i.x-15,y:i.y})})))}))}}}]),a}(C.Layer),_=(a(27),a(5));var F=function(){return Object(_.jsxs)(s.a,{center:[45.4,-75.7],zoom:7,minZoom:3,maxZoom:16,maxNativeZoom:15,maxBounds:[[-90,-180],[90,180]],children:[Object(_.jsx)(l.a,{url:"https://services.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:'\xa9 <a href="https://wiki.openstreetmap.org/wiki/Esri"></a> contributors'}),Object(_.jsx)(D,{}),Object(_.jsx)(N,{})]})};r.a.render(Object(_.jsx)(o.a.StrictMode,{children:Object(_.jsx)(F,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.3791d1dc.chunk.js.map